@inherits LayoutComponentBase


<MudThemeProvider Theme="_themeManager.Theme" />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
	<MudAppBar Elevation="_themeManager.AppBarElevation">
		<MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />
		Webapp Server PerPage Auth
		<MudSpacer />
	</MudAppBar>
	<MudDrawer @bind-Open="@_drawerOpen" ClipMode="_themeManager.DrawerClipMode" Elevation="_themeManager.DrawerElevation">
		<NavMenu />
	</MudDrawer>
	<MudMainContent>
		<CustomErrorBoundary>
			@Body
		</CustomErrorBoundary>
	</MudMainContent>
	<MudThemeManagerButton OnClick="@((e) => OpenThemeManager(true))" />
	<MudThemeManager Open="_themeManagerOpen" OpenChanged="OpenThemeManager" Theme="_themeManager" ThemeChanged="UpdateTheme" />
</MudLayout>


<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
</div>

@code {
	private bool _drawerOpen = true;

	void DrawerToggle()
	{
		_drawerOpen = !_drawerOpen;

	}

	private ThemeManagerTheme _themeManager = new ThemeManagerTheme();
	public bool _themeManagerOpen = false;

	void OpenThemeManager(bool value)
	{
		_themeManagerOpen = value;
	}

	void UpdateTheme(ThemeManagerTheme value)
	{
		_themeManager = value;
		StateHasChanged();
	}

	protected override void OnInitialized()
	{
		StateHasChanged();
	}
}